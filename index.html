<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>층 / 공간 관리</title>

<style>
:root{
  --bg:#0f0f12;
  --card:#1a1a1f;
  --text:#eee;
  --muted:#999;
  --accent:#ffcc66;
  --sub:#6a5acd;
}

*{box-sizing:border-box}
body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  font-family:system-ui, sans-serif;
}

/* ---------- HEADER ---------- */
header{
  padding:16px;
  text-align:center;
  border-bottom:1px solid #222;
}
header h1{margin:0;font-size:1.2rem}
header button{margin-top:10px}

/* ---------- BUTTON ---------- */
button{
  background:var(--accent);
  border:none;
  border-radius:8px;
  padding:6px 10px;
  font-size:.75rem;
  cursor:pointer;
}
button.sub{background:var(--sub);color:#fff}
button.ghost{background:#222;color:#ccc}

/* ---------- LAYOUT ---------- */
main{
  max-width:900px;
  margin:0 auto;
  padding:16px;
}

/* ---------- FLOOR ---------- */
.floor{
  background:var(--card);
  border-radius:14px;
  margin-bottom:14px;
  overflow:hidden;
}
.floor-header{
  padding:14px;
  background:linear-gradient(135deg,#1a0f0f,var(--sub));
  cursor:pointer;
}
.floor-header h2{margin:0;font-size:1rem}
.floor-header p{margin:4px 0 0;font-size:.75rem;color:var(--muted)}

.floor-controls{
  display:flex;
  gap:6px;
  padding:10px 14px;
  flex-wrap:wrap;
}

.rooms{display:none;padding:0 14px 14px;}
.floor.open .rooms{display:block}

/* ---------- ROOM ---------- */
.room{
  background:#1b1212;
  border-radius:10px;
  padding:10px;
  margin-top:10px;
}
.room.locked{opacity:.7}
.room h3{margin:0;font-size:.85rem}
.room p{margin:4px 0 0;font-size:.7rem;color:var(--muted)}

.room-controls{
  display:flex;
  gap:6px;
  margin-top:8px;
  flex-wrap:wrap;
}

/* ---------- MOBILE ---------- */
@media(max-width:600px){
  button{width:100%}
  .floor-controls,.room-controls{flex-direction:column}
}
</style>
</head>

<body>

<header>
  <h1>공간 정리</h1>
  <button onclick="addFloor()">층 추가</button>
</header>

<main id="floors"></main>

<script>
const floors = [];

function addFloor(){
  const name = prompt('층 이름');
  if(!name) return;
  floors.push({
    name,
    desc:'',
    open:true,
    rooms:[]
  });
  render();
}

function addRoom(fi){
  const name = prompt('공간 이름');
  if(!name) return;
  floors[fi].rooms.push({
    name,
    desc:'',
    locked:false
  });
  render();
}

function toggleFloor(i){
  floors[i].open = !floors[i].open;
  render();
}

function moveFloor(i,dir){
  const t=i+dir;
  if(t<0||t>=floors.length) return;
  [floors[i],floors[t]]=[floors[t],floors[i]];
  render();
}

function removeFloor(i){
  if(confirm('층 삭제할까?')){
    floors.splice(i,1);
    render();
  }
}

function editFloor(i){
  const n = prompt('층 이름', floors[i].name);
  if(n!==null) floors[i].name=n;
  const d = prompt('층 설명', floors[i].desc);
  if(d!==null) floors[i].desc=d;
  render();
}

function toggleLock(fi,ri){
  floors[fi].rooms[ri].locked=!floors[fi].rooms[ri].locked;
  render();
}

function editRoom(fi,ri){
  const r=floors[fi].rooms[ri];
  const n=prompt('공간 이름',r.name);
  if(n!==null) r.name=n;
  const d=prompt('설명',r.desc);
  if(d!==null) r.desc=d;
  render();
}

function removeRoom(fi,ri){
  if(confirm('공간 삭제?')){
    floors[fi].rooms.splice(ri,1);
    render();
  }
}

function render(){
  const el=document.getElementById('floors');
  el.innerHTML='';
  floors.forEach((f,fi)=>{
    const div=document.createElement('div');
    div.className='floor'+(f.open?' open':'');
    div.innerHTML=`
      <div class="floor-header" onclick="toggleFloor(${fi})">
        <h2>${f.name}</h2>
        <p>${f.desc||''}</p>
      </div>
      <div class="floor-controls">
        <button onclick="addRoom(${fi})">공간 추가</button>
        <button class="ghost" onclick="moveFloor(${fi},-1)">↑</button>
        <button class="ghost" onclick="moveFloor(${fi},1)">↓</button>
        <button class="sub" onclick="editFloor(${fi})">수정</button>
        <button class="ghost" onclick="removeFloor(${fi})">삭제</button>
      </div>
      <div class="rooms">
        ${f.rooms.map((r,ri)=>`
          <div class="room ${r.locked?'locked':''}">
            <h3>${r.name}</h3>
            <p>${r.desc||''}</p>
            <div class="room-controls">
              <button onclick="toggleLock(${fi},${ri})">${r.locked?'잠김 해제':'잠김'}</button>
              <button class="sub" onclick="editRoom(${fi},${ri})">수정</button>
              <button class="ghost" onclick="removeRoom(${fi},${ri})">삭제</button>
            </div>
          </div>
        `).join('')}
      </div>
    `;
    el.appendChild(div);
  });
}
</script>

</body>
</html>