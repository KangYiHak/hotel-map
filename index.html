<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ÎÇòÌè¥Î¶¨ÌÉÑ Ìò∏ÌÖî Í≥µÍ∞ú ÏßÄÎèÑ</title>

  <style>
    body {
      font-family: "Georgia", "Times New Roman", serif;
      background: radial-gradient(circle at top, #2b2b38, #0f0f14);
      color: #f5f5f5;
      margin: 0;
      padding: 16px;
    }

    h1 { margin-bottom: 6px; }
    p { font-size: 13px; opacity: 0.8; }

    button {
      padding: 6px 10px;
      border: 1px solid #6b5c8a;
      border-radius: 6px;
      background: linear-gradient(#3b3555, #26233a);
      color: #f5f5f5;
      cursor: pointer;
      font-size: 12px;
    }

    button.secondary {
      background: #1e1b2e;
    }

    .building {
      display: flex;
      flex-direction: column-reverse;
      gap: 14px;
      margin-top: 16px;
    }

    .floor {
      background: rgba(20,20,30,0.9);
      border-radius: 16px;
      padding: 12px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.4);
      border: 1px solid #3f375a;
    }

    .floor-header {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      align-items: center;
      gap: 6px;
    }

    .floor-header input {
      font-size: 15px;
      font-weight: bold;
      border: none;
      border-bottom: 1px solid #6b5c8a;
      outline: none;
      background: transparent;
      color: #fff;
    }

    .rooms {
      margin-top: 12px;
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
      gap: 12px;
    }

    .room {
      border-radius: 14px;
      padding: 10px;
      background: linear-gradient(#191926, #11111a);
      border: 2px solid #3f375a;
      cursor: pointer;
      transition: transform 0.15s ease, box-shadow 0.15s ease;
    }

    .room:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(0,0,0,0.5);
    }

    .room.safe { border-color: #4ade80; }
    .room.warning { border-color: #fbbf24; }
    .room.danger { border-color: #f87171; }

    .room-title {
      font-size: 13px;
      font-weight: bold;
    }

    .room-tag {
      font-size: 11px;
      opacity: 0.7;
    }

    @media (max-width: 600px) {
      .rooms { grid-template-columns: 1fr; }
    }

    /* ===== ÌåùÏóÖ ===== */
    .popup {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.7);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 10;
    }

    .popup-content {
      background: linear-gradient(#1c1c2b, #0f0f18);
      border-radius: 18px;
      padding: 16px;
      max-width: 420px;
      width: 90%;
      border: 1px solid #6b5c8a;
      box-shadow: 0 20px 40px rgba(0,0,0,0.6);
    }

    .popup-content h2 {
      margin-top: 0;
      font-size: 16px;
    }

    .popup-content input,
    .popup-content textarea,
    .popup-content select {
      width: 100%;
      margin-top: 6px;
      background: #0f0f18;
      color: #fff;
      border: 1px solid #3f375a;
      border-radius: 6px;
      padding: 6px;
      font-size: 12px;
    }
  </style>
</head>

<body>
  <h1>üè® ÎÇòÌè¥Î¶¨ÌÉÑ Ìò∏ÌÖî Í≥µÍ∞ú ÏßÄÎèÑ</h1>
  <p>Ï°∞ÏÇ¨ Í∞ÄÎä•Ìïú Ìò∏ÌÖî Íµ¨Ï°∞ ÏßÄÎèÑ</p>
  <button onclick="addFloor()">‚ûï Ï∏µ Ï∂îÍ∞Ä</button>

  <div id="building" class="building"></div>

  <!-- ÏÉÅÏÑ∏ ÌåùÏóÖ -->
  <div id="popup" class="popup" onclick="closePopup(event)">
    <div class="popup-content" onclick="event.stopPropagation()">
      <h2>Í∞ùÏã§ ÏÉÅÏÑ∏</h2>
      <input id="p-name" placeholder="Í∞ùÏã§ Ïù¥Î¶Ñ" />
      <textarea id="p-desc" rows="6" placeholder="ÏÉÅÏÑ∏ ÏÑ§Î™Ö / Ï°∞ÏÇ¨ Î°úÍ∑∏"></textarea>
      <select id="p-tag">
        <option value="safe">safe</option>
        <option value="warning">warning</option>
        <option value="danger">danger</option>
      </select>
      <br><br>
      <button onclick="savePopup()">Ï†ÄÏû•</button>
      <button class="secondary" onclick="closePopup()">Îã´Í∏∞</button>
    </div>
  </div>

  <script>
    let data = JSON.parse(localStorage.getItem("hotelData")) || [];
    let currentRoom = null;

    function save() {
      localStorage.setItem("hotelData", JSON.stringify(data));
    }

    function render() {
      const building = document.getElementById("building");
      building.innerHTML = "";

      data.forEach(floor => {
        const floorEl = document.createElement("div");
        floorEl.className = "floor";

        const header = document.createElement("div");
        header.className = "floor-header";

        const title = document.createElement("input");
        title.value = floor.name;
        title.oninput = e => { floor.name = e.target.value; save(); };

        const toggle = document.createElement("button");
        toggle.textContent = floor.open ? "Ï†ëÍ∏∞" : "ÌéºÏπòÍ∏∞";
        toggle.className = "secondary";
        toggle.onclick = () => {
          floor.open = !floor.open;
          save();
          render();
        };

        const addRoomBtn = document.createElement("button");
        addRoomBtn.textContent = "‚ûï Í∞ùÏã§";
        addRoomBtn.className = "secondary";
        addRoomBtn.onclick = () => {
          floor.rooms.push({ name: "Í∞ùÏã§", desc: "", tag: "safe" });
          save();
          render();
        };

        header.append(title, toggle, addRoomBtn);
        floorEl.appendChild(header);

        if (floor.open) {
          const rooms = document.createElement("div");
          rooms.className = "rooms";

          floor.rooms.forEach(room => {
            const roomEl = document.createElement("div");
            roomEl.className = `room ${room.tag}`;
            roomEl.onclick = () => openPopup(room);

            const rTitle = document.createElement("div");
            rTitle.className = "room-title";
            rTitle.textContent = room.name;

            const rTag = document.createElement("div");
            rTag.className = "room-tag";
            rTag.textContent = room.tag;

            roomEl.append(rTitle, rTag);
            rooms.appendChild(roomEl);
          });

          floorEl.appendChild(rooms);
        }

        building.appendChild(floorEl);
      });
    }

    function addFloor() {
      data.push({ name: `${data.length + 1}Ï∏µ`, open: true, rooms: [] });
      save();
      render();
    }

    function openPopup(room) {
      currentRoom = room;
      document.getElementById("p-name").value = room.name;
      document.getElementById("p-desc").value = room.desc;
      document.getElementById("p-tag").value = room.tag;
      document.getElementById("popup").style.display = "flex";
    }

    function closePopup() {
      document.getElementById("popup").style.display = "none";
    }

    function savePopup() {
      if (!currentRoom) return;
      currentRoom.name = document.getElementById("p-name").value;
      currentRoom.desc = document.getElementById("p-desc").value;
      currentRoom.tag = document.getElementById("p-tag").value;
      save();
      render();
      closePopup();
    }

    render();
  </script>
</body>
</html>
