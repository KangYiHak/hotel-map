<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>NAPOLITAN HOTEL</title>

<style>
:root{
  --bg:#0d0d10;
  --card:#1a1a1f;
  --room:#241818;
  --popup:#16161b;
  --text:#f3f3f3;
  --muted:#aaa;
  --accent:#d6b36a;
  --danger:#8b1e1e;
}

*{box-sizing:border-box}
body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  font-family:system-ui,sans-serif;
}

header{
  padding:14px;
  text-align:center;
  border-bottom:1px solid #222;
  position:sticky;
  top:0;
  background:var(--bg);
  z-index:50;
}

button{
  background:var(--accent);
  border:none;
  border-radius:8px;
  padding:6px 10px;
  font-size:.75rem;
  cursor:pointer;
}
button.ghost{background:#222;color:#ccc}
button.danger{background:var(--danger);color:#fff}

main{
  max-width:900px;
  margin:auto;
  padding:16px;
}

.floor{
  background:var(--card);
  border-radius:14px;
  padding:12px;
  margin-bottom:14px;
}

.floor-header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  cursor:pointer;
}

.floor-controls{
  display:flex;
  gap:6px;
}

.rooms{display:none;margin-top:10px}

.room{
  background:var(--room);
  border-radius:10px;
  padding:10px;
  margin-top:8px;
  opacity:1;
}
.room.locked{opacity:.5}

.tags{margin-top:6px}
.tag{
  display:inline-block;
  font-size:.65rem;
  padding:2px 6px;
  border-radius:6px;
  background:#333;
  margin-right:4px;
}

.room-controls{
  display:flex;
  gap:6px;
  margin-top:8px;
}

/* ---------- ÌÉúÍ∑∏ ÌïÑÌÑ∞ ---------- */
#tagFilter{
  display:flex;
  gap:6px;
  flex-wrap:wrap;
  justify-content:center;
  margin-top:8px;
}
.filter-tag{
  font-size:.65rem;
  padding:3px 8px;
  border-radius:999px;
  background:#222;
  cursor:pointer;
}
.filter-tag.active{
  background:var(--accent);
  color:#000;
}

/* ---------- ÌåùÏóÖ ---------- */
.popup{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.7);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:100;
}
.popup-content{
  background:var(--popup);
  width:90%;
  max-width:420px;
  border-radius:16px;
  padding:16px;
}
.popup-content h3{margin-top:0}
.popup-content input,
.popup-content textarea{
  width:100%;
  margin-bottom:8px;
  background:#0f0f14;
  border:1px solid #333;
  border-radius:6px;
  color:var(--text);
  padding:6px;
}
.close{float:right;cursor:pointer;color:var(--muted)}

.item{
  display:flex;
  align-items:center;
  gap:6px;
  font-size:.75rem;
}
.item.done{text-decoration:line-through;opacity:.5}
</style>
</head>

<body>

<header>
  <h2>NAPOLITAN HOTEL</h2>
  <button onclick="openAddFloor()">+ Ï∏µ Ï∂îÍ∞Ä</button>

  <div id="tagFilter"></div>
</header>

<main>
  <div id="floors"></div>
</main>

<div class="popup" id="popup">
  <div class="popup-content">
    <span class="close" onclick="closePopup()">‚úï</span>
    <h3 id="popupTitle"></h3>
    <div id="popupBody"></div>
  </div>
</div>

<script>
let floors = [];
let activeTags = [];

const floorsEl = document.getElementById('floors');
const popupEl = document.getElementById('popup');

function render(){
  floorsEl.innerHTML='';
  const tagSet=new Set();

  floors.forEach((f,fi)=>{
    const floor=document.createElement('div');
    floor.className='floor';

    floor.innerHTML=`
      <div class="floor-header">
        <b>${f.name}</b>
        <div class="floor-controls">
          <button class="ghost" onclick="moveFloor(${fi},-1)">‚Üë</button>
          <button class="ghost" onclick="moveFloor(${fi},1)">‚Üì</button>
          <button class="danger" onclick="removeFloor(${fi})">ÏÇ≠Ï†ú</button>
        </div>
      </div>

      <div class="rooms"></div>
      <button class="ghost" onclick="openAddRoom(${fi})">+ Í≥µÍ∞Ñ Ï∂îÍ∞Ä</button>
    `;

    const roomsEl=floor.querySelector('.rooms');

    f.rooms.forEach((r,ri)=>{
      r.tags.forEach(t=>tagSet.add(t));
      if(activeTags.length && !activeTags.some(t=>r.tags.includes(t))) return;

      const room=document.createElement('div');
      room.className='room'+(r.locked?' locked':'');
      room.innerHTML=`
        <b>${r.name} ${r.locked?'üîí':''}</b>
        <p>${r.desc}</p>
        <div class="tags">${r.tags.map(t=>`<span class="tag">${t}</span>`).join('')}</div>
        <div class="room-controls">
          <button onclick="openItems(${fi},${ri})">üì¶ ÏïÑÏù¥ÌÖú</button>
          <button onclick="openEditRoom(${fi},${ri})">ÏàòÏ†ï</button>
          <button class="ghost" onclick="toggleLock(${fi},${ri})">Ïû†ÍπÄ</button>
          <button class="danger" onclick="removeRoom(${fi},${ri})">ÏÇ≠Ï†ú</button>
        </div>
      `;
      roomsEl.appendChild(room);
    });

    floor.querySelector('.floor-header').onclick=(e)=>{
      if(e.target.tagName==='BUTTON') return;
      roomsEl.style.display=roomsEl.style.display==='block'?'none':'block';
    };

    floorsEl.appendChild(floor);
  });

  renderTagFilter([...tagSet]);
}

function renderTagFilter(tags){
  const el=document.getElementById('tagFilter');
  el.innerHTML=tags.map(t=>
    `<span class="filter-tag ${activeTags.includes(t)?'active':''}"
      onclick="toggleFilter('${t}')">${t}</span>`
  ).join('');
}

function toggleFilter(t){
  const i=activeTags.indexOf(t);
  i>-1?activeTags.splice(i,1):activeTags.push(t);
  render();
}

/* ---------- ÌåùÏóÖ ---------- */
function popup(title,body){
  popupTitle.innerText=title;
  popupBody.innerHTML=body;
  popupEl.style.display='flex';
}
function closePopup(){popupEl.style.display='none';}

/* ---------- Ï∏µ ---------- */
function openAddFloor(){
  popup('Ï∏µ Ï∂îÍ∞Ä',`
    <input id="fn" placeholder="Ï∏µ Ïù¥Î¶Ñ">
    <button onclick="addFloor()">Ï∂îÍ∞Ä</button>
  `);
}
function addFloor(){
  floors.push({name:fn.value,rooms:[]});
  closePopup();render();
}
function moveFloor(i,d){
  const t=i+d;
  if(t<0||t>=floors.length)return;
  [floors[i],floors[t]]=[floors[t],floors[i]];
  render();
}
function removeFloor(i){
  if(confirm('ÏÇ≠Ï†ú?')){floors.splice(i,1);render();}
}

/* ---------- Í≥µÍ∞Ñ ---------- */
function openAddRoom(fi){
  popup('Í≥µÍ∞Ñ Ï∂îÍ∞Ä',`
    <input id="rn" placeholder="Í≥µÍ∞Ñ Ïù¥Î¶Ñ">
    <textarea id="rd" placeholder="ÏÑ§Î™Ö"></textarea>
    <input id="rt" placeholder="ÌÉúÍ∑∏ (ÏâºÌëú)">
    <button onclick="addRoom(${fi})">Ï∂îÍ∞Ä</button>
  `);
}
function addRoom(fi){
  floors[fi].rooms.push({
    name:rn.value,
    desc:rd.value,
    tags:rt.value.split(',').map(t=>t.trim()).filter(Boolean),
    items:[],
    locked:false
  });
  closePopup();render();
}
function openEditRoom(fi,ri){
  const r=floors[fi].rooms[ri];
  popup('Í≥µÍ∞Ñ ÏàòÏ†ï',`
    <input id="rn" value="${r.name}">
    <textarea id="rd">${r.desc}</textarea>
    <input id="rt" value="${r.tags.join(', ')}">
    <button onclick="saveRoom(${fi},${ri})">Ï†ÄÏû•</button>
  `);
}
function saveRoom(fi,ri){
  const r=floors[fi].rooms[ri];
  r.name=rn.value;
  r.desc=rd.value;
  r.tags=rt.value.split(',').map(t=>t.trim()).filter(Boolean);
  closePopup();render();
}
function removeRoom(fi,ri){
  if(confirm('ÏÇ≠Ï†ú?')){floors[fi].rooms.splice(ri,1);render();}
}
function toggleLock(fi,ri){
  floors[fi].rooms[ri].locked=!floors[fi].rooms[ri].locked;
  render();
}

/* ---------- ÏïÑÏù¥ÌÖú ---------- */
function openItems(fi,ri){
  const r=floors[fi].rooms[ri];
  popup(`ÏïÑÏù¥ÌÖú - ${r.name}`,`
    ${r.items.map((it,i)=>`
      <div class="item ${it.done?'done':''}">
        <input type="checkbox" ${it.done?'checked':''}
          ${r.locked?'disabled':''}
          onchange="toggleItem(${fi},${ri},${i})">
        <span onclick="openItemDetail(${fi},${ri},${i})">${it.name}</span>
      </div>`).join('')}
    ${r.locked?'':'<button onclick="openAddItem('+fi+','+ri+')">+ ÏïÑÏù¥ÌÖú</button>'}
  `);
}
function openAddItem(fi,ri){
  popup('ÏïÑÏù¥ÌÖú Ï∂îÍ∞Ä',`
    <input id="inm" placeholder="Ïù¥Î¶Ñ">
    <textarea id="im" placeholder="ÌöçÎìù Í≤ΩÎ°ú"></textarea>
    <button onclick="addItem(${fi},${ri})">Ï∂îÍ∞Ä</button>
  `);
}
function addItem(fi,ri){
  floors[fi].rooms[ri].items.push({name:inm.value,method:im.value,done:false});
  closePopup();render();
}
function toggleItem(fi,ri,ii){
  const it=floors[fi].rooms[ri].items[ii];
  it.done=!it.done;
  render();
}
function openItemDetail(fi,ri,ii){
  const it=floors[fi].rooms[ri].items[ii];
  popup(it.name,`<p>${it.method}</p>`);
}

render();
</script>

</body>
</html>